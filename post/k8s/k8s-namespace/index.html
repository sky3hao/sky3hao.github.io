<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Namespce与Cgroup概述 - 老鹰之歌的博客</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="老鹰之歌" />
  <meta name="description" content="Namespace概述 “namespace即“命名空间”，也称“名称空间” 。是许多编程语言使用的一种代码组织的形式，通过命名空间来分类，区别" />







<meta name="generator" content="Hugo 0.104.3" />


<link rel="canonical" href="http://localhost:1313/post/k8s/k8s-namespace/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.de22abc00de44766eebd1054fd9e0b254b071f89d5019044f893c484a9249a8d.css" integrity="sha256-3iKrwA3kR2buvRBU/Z4LJUsHH4nVAZBE&#43;JPEhKkkmo0=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="Namespce与Cgroup概述" />
<meta property="og:description" content="Namespace概述 “namespace即“命名空间”，也称“名称空间” 。是许多编程语言使用的一种代码组织的形式，通过命名空间来分类，区别" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/k8s/k8s-namespace/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-11-07T14:02:23+08:00" />
<meta property="article:modified_time" content="2022-11-07T14:50:23+08:00" />

<meta itemprop="name" content="Namespce与Cgroup概述">
<meta itemprop="description" content="Namespace概述 “namespace即“命名空间”，也称“名称空间” 。是许多编程语言使用的一种代码组织的形式，通过命名空间来分类，区别"><meta itemprop="datePublished" content="2022-11-07T14:02:23+08:00" />
<meta itemprop="dateModified" content="2022-11-07T14:50:23+08:00" />
<meta itemprop="wordCount" content="3991">
<meta itemprop="keywords" content="K8S," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Namespce与Cgroup概述"/>
<meta name="twitter:description" content="Namespace概述 “namespace即“命名空间”，也称“名称空间” 。是许多编程语言使用的一种代码组织的形式，通过命名空间来分类，区别"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">老鹰之歌的博客</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/post/">文章</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/about/">关于</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      老鹰之歌的博客
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/post/">文章</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://localhost:1313/about/">关于</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight wallpaper">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">Namespce与Cgroup概述</h1>
      

      <div class="post-meta">
  <div class="post-meta-author">
    by
      <a href="/about">
        <span class="post-meta-author-name">
          老鹰之歌
        </span>
      </a>
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-11-07">
      2022-11-07
    </time>
  </div>

  


  <div class="post-meta__right">
    

    <div class="post-meta-category">
        <a href="http://localhost:1313/categories/k8s/"> K8S </a>
          
      </div>


    
    


    
    
  </div>
</div>

    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-namespace-的类型">1. Namespace 的类型</a></li>
        <li><a href="#2-父子-pid-namespace-示例">2. 父子 PID Namespace 示例</a></li>
        <li><a href="#3-创建-namespace">3. 创建 Namespace</a></li>
        <li><a href="#4-从外部角度看-namespace">4. 从外部角度看 Namespace</a></li>
        <li><a href="#5-namespace-和容器">5. Namespace 和容器</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-cgroup-版本">1. Cgroup 版本</a></li>
        <li><a href="#2-相关概念">2. 相关概念</a></li>
        <li><a href="#3-red-hat-enterprise-linux-中的可用子系统">3. Red Hat Enterprise Linux 中的可用子系统</a></li>
        <li><a href="#4-创建-cgroup">4. 创建 cgroup</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>


    
    <div class="post-content">
      <h1 id="namespace概述">Namespace概述</h1>
<p>“namespace即“命名空间”，也称“名称空间” 。是许多编程语言使用的一种代码组织的形式，通过命名空间来分类，区别不同的代码功能，避免不同的代码片段（通常由不同的人协同工作或调用已有的代码片段）同时使用时由于不同代码间变量名相同而造成冲突。”</p>
<p>换句话说，namespace 的关键特性是进程隔离。在运行许多不同服务的服务器上，将各个服务及其相关进程相互隔离能够减少变更带来的影响以及安全性方面的问题。大多数情况下，隔离服务符合 Martin Fowler 所描述的微服务架构风格。</p>
<p>在开发过程中使用容器为开发人员提供了一个独立的环境，看起来就像一个完整的虚拟机。但它不是虚拟机，而是在服务器某处上运行的进程。如果开发人员启动了两个容器，那么某个服务器上的某两个地方将有两个进程运行，但它们是相互隔离的。</p>
<h3 id="1-namespace-的类型">1. Namespace 的类型</h3>
<p>Linux 内核包含了不同类型的 namespace。每个 namespace 都有自己的独特属性。</p>
<ol>
<li>user namespace 拥有自己的一组用户 ID 和组 ID，用于分配给进程。这意味着进程可以在其 user namespace 中拥有 root 权限，而不需要在其他 user namespace 中获得。</li>
<li>process ID (PID) namespace 将一组 PID 分配给独立于其他 namespace 中的一组 PID 的进程。在新的 namespace 中创建的第一个进程分得 PID 1，子进程被分配给后续的 PID。如果子进程使用自己的 PID namespace 创建，则它在该 namespace 中使用 PID 1，在父进程的 namespace 中使用自己的 PID。请参见下面的示例。</li>
<li>network namespace 拥有独立的网络栈：自己的专用路由表、IP 地址集、套接字列表、连接跟踪表、防火墙及其他网络相关资源。</li>
<li>mount namespace 拥有一个独立的挂载点列表，并对该 namespace 中的进程可见。这意味着您可以在 mount namespace 中挂载和卸载文件系统，而不会影响主机文件系统。</li>
<li>interprocess communication (IPC) namespace 拥有自己的 IPC 资源，例如 POSIX 消息队列。</li>
<li>UNIX Time‑Sharing (UTS) namespace 允许单个系统对不同的进程显示不同的主机名和域名。</li>
</ol>
<h3 id="2-父子-pid-namespace-示例">2. 父子 PID Namespace 示例</h3>
<p>下图中共有三个 PID namespace：一个父 namespace 和两个子 namespace。父 namespace 中共有四个进程，PID1 至 PID4。这些都是正常的进程，它们可以看到彼此并共享资源。</p>
<p>父 namespace 中使用 PID2 和 PID3 的子进程也属于它们各自的 PID namespace（PID 为 1）。在子 namespace 中，PID1 进程看不到任何外部资源。例如，两个子 namespace 中的 PID1 看不到父 namespace 中的 PID4。</p>
<p>在这种情况下，这使得不同 namespace 中的进程之间得以隔离。</p>
<p><img src="/k8s/namespace/name2.jpeg" alt=""></p>
<h3 id="3-创建-namespace">3. 创建 Namespace</h3>
<p>有了这些理论，现在我们实际创建一个新的 namespace 以加深理解。Linux unshare 命令是一个很好的着手点。手册页显示它就是我们要找的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>NAME
</span></span><span style="display:flex;"><span>          unshare - run program in new name namespaces
</span></span></code></pre></div><p>当前我以普通用户 svk 的身份登录，该用户拥有自己的用户 ID、组等，但没有 root 权限：</p>
<pre tabindex="0"><code>svk $ id
uid=1000(svk) gid=1000(svk) groups=1000(svk) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c.1023
</code></pre><p>现在，我运行以下 unshare 命令，使用自己的 user 和 PID namespace 创建一个新的 namespace。我将 root 用户映射到新的 namespace（换句话说，我在新的 namespace 中拥有 root 权限），挂载一个新的 proc 文件系统，并在新创建的 namespace 中进行进程（本例中为 bash）分支。</p>
<pre tabindex="0"><code>svk $ unshare --user --pid --map-root-user --mount-proc --fork bash
</code></pre><p>（对于熟悉容器的人来说，这相当于在运行的容器中执行 <!-- raw HTML omitted --> exec -it <!-- raw HTML omitted --> /bin/bash 命令。）</p>
<p>ps -ef 命令显示有两个进程正在运行（bash 和 ps 命令本身），并且 id 命令确认我在新的 namespace 中是root 用户（这一点也可以从更改的命令提示符看出）：</p>
<pre tabindex="0"><code>root # ps -ef
UID         PID     PPID  C STIME TTY        TIME CMD
root          1        0  0 14:46 pts/0  00:00:00 bash
root         15        1  0 14:46 pts/0  00:00:00 ps -ef
root # id
uid=0(root) gid=0(root) groups=0(root) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c.1023
</code></pre><p>需要注意的是，我只能看到我的 namespace 中的两个进程，而看不到系统上运行的任何其他进程。我完全隔离在自己的 namespace 中。</p>
<h3 id="4-从外部角度看-namespace">4. 从外部角度看 Namespace</h3>
<p>输出结果显示了三个 namespace（类型为 user、mnt 和 pid），对应我上面运行的 unshare 命令中的参数。从这个外部角度来看，每个 namespace 都以用户 svk身份运行，而不是以 root身份。而在 namespace 内部，进程以 root 身份运行，并可以访问所有预期的资源。（为了便于阅读，输出结果分成了两行。）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>root <span style="color:#75715e"># lsns --output-all | head -1; lsns --output-all | grep svk</span>
</span></span><span style="display:flex;"><span>        NS TYPE   PATH                   NPROCS    PID   PPID ...
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4026532690</span> user   /proc/97964/ns/user         <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">97964</span>  <span style="color:#ae81ff">97944</span> ...                
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4026532691</span> mnt    /proc/97964/ns/mnt          <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">97964</span>  <span style="color:#ae81ff">97944</span> ...        
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4026532692</span> pid    /proc/97965/ns/pid          <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">97965</span>  <span style="color:#ae81ff">97964</span> ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ...COMMAND                                                       UID USER               
</span></span><span style="display:flex;"><span>  ... unshare --user --map-root-user --fork –pid --mount-proc bash  <span style="color:#ae81ff">1000</span> svk               
</span></span><span style="display:flex;"><span>  ... unshare --user --map-root-user --fork –pid --mount-proc bash  <span style="color:#ae81ff">1000</span> svk               
</span></span><span style="display:flex;"><span>  ... bash         
</span></span></code></pre></div><h3 id="5-namespace-和容器">5. Namespace 和容器</h3>
<p>namespace 是容器的基础技术之一，用于隔离资源。我们已经展示了如何手动创建 namespace，但 Docker、rkt 和 podman 等容器运行时可为您创建 namespace，帮助您减轻工作负担。同样地，NGINX Unit 中的isolation应用对象也可以创建 namespace 和 cgroup。</p>
<p>====</p>
<p>===</p>
<h1 id="cgroup概述">cgroup概述</h1>
<p>控制组 (cgroup) 是 Linux 内核的一个特性，用于限制、记录和隔离一组进程的资源使用（CPU、内存、磁盘 I/O、网络等）。</p>
<p>cgroup 具有以下特性：</p>
<ul>
<li><strong>资源限制</strong> —— 您可以配置 cgroup，从而限制进程可以对特定资源（例如内存或 CPU）的使用量。</li>
<li><strong>优先级</strong> —— 当资源发生冲突时，您可以控制一个进程相比另一个 cgroup 中的进程可以使用的资源量（CPU、磁盘或网络）。</li>
<li><strong>记录</strong> —— 在 cgroup 级别监控和报告资源限制。</li>
<li><strong>控制</strong> —— 您可以使用单个命令更改 cgroup 中所有进程的状态（冻结、停止或重新启动）。</li>
</ul>
<p>cgroup 的作用基本上就是控制一个进程或一组进程可以访问或使用给定关键资源（CPU、内存、网络和磁盘 I/O）的量。一个容器中通常运行了多个进程，并且您需要对这些进程实施统一控制，因此 cgroup 是容器的关键组件。Kubernetes 环境使用cgroup 在 pod 级别上部署资源请求和限制以及对应的 QoS 类。</p>
<p>下图说明了当您将特定比例的可用系统资源分配给一个 cgroup（在本例中，为cgroup‑1）后，剩余资源是如何在系统上其他 cgroup（以及各个进程）之间进行分配的。</p>
<p><img src="/k8s/namespace/cgroup1.jpeg" alt=""></p>
<h3 id="1-cgroup-版本">1. Cgroup 版本</h3>
<p>根据维基百科的说法，cgroup 第一个版本于 2007 年末或 2008 年初并入 Linux 内核主线，“cgroup 第二个版本的文档于 2016 年首次出现在 Linux 内核中”。第二个版本进行了许多改变，其中较大的变化是树形结构更加简化、cgroup 层次结构增加了新的特性和接口，以及能够更好地适应“rootless”容器（使用非零 UID）。</p>
<p>v2版本的接口也有所更新，其中我最喜欢的是 pressure stall information (PSI)。与之前相比，它能够更精细地提供对每个进程内存使用和分配情况的洞察（不在本博客的讨论范围内，但这是一个非常有意思的话题）。</p>
<h3 id="2-相关概念">2. 相关概念</h3>
<ol>
<li><strong>任务（task）</strong>。在cgroups中，任务就是系统的一个进程。</li>
<li><strong>控制族群（control group）</strong>。控制族群就是一组按照某种标准划分的进程。Cgroups中的资源控制都是以控制族群为单位实现。一个进程可以加入到某个控制族群，也从一个进程组迁移到另一个控制族群。一个进程组的进程可以使用cgroups以控制族群为单位分配的资源，同时受到cgroups以控制族群为单位设定的限制。</li>
<li><strong>层级（hierarchy）</strong>。控制族群可以组织成hierarchical的形式，既一颗控制族群树。控制族群树上的子节点控制族群是父节点控制族群的孩子，继承父控制族群的特定的属性。</li>
<li><strong>子系统（subsystem）</strong>。一个子系统就是一个资源控制器，比如cpu子系统就是控制cpu时间分配的一个控制器。子系统必须附加（attach）到一个层级上才能起作用，一个子系统附加到某个层级以后，这个层级上的所有控制族群都受到这个子系统的控制。</li>
</ol>
<p>Cgroup是Linux下一种将进程按组管理的机制，在用户层面看，Cgroup技术就是可以把系统中的所有进程组织成一颗独立的树，每颗树都包含系统所有进程，树的每个节点就是一个进程组，而每颗树又和一个或者多个subsystem关联，树的作用是对进程分组，而subsystem作用是对这些组进行操作。</p>
<p><strong>subsystem</strong>：一个subsystem就是一个内核模块，它被关联到一颗Cgroup树之后，就会对树的每个节点(进程组)上做具体操作。subsystem也被称为resource controller，因为它主要用来调度和限制每个进程组资源，有时也可以将进程分组只是为了做监控，观察进程组的状态。例如,perf_event subsystem。目前Linux支持12中system，比如限制CPU的使用时间，限制使用内存，统计CPU使用情况，冻结和恢复一组进程等。</p>
<h3 id="3-red-hat-enterprise-linux-中的可用子系统">3. Red Hat Enterprise Linux 中的可用子系统</h3>
<table>
<thead>
<tr>
<th>subsystem</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpu</td>
<td>主要限制进程CPU使用率</td>
</tr>
<tr>
<td>cpuacct</td>
<td>统计cgroups中进程的cpu使用率</td>
</tr>
<tr>
<td>cpuset</td>
<td>为cgroups中进程分配单独的CPU节点(多核)或内存节点</td>
</tr>
<tr>
<td>blkio</td>
<td>限制进程的块设备IO</td>
</tr>
<tr>
<td>memory</td>
<td>限制进程的memory使用量</td>
</tr>
<tr>
<td>devices</td>
<td>可以控制进程能够访问某些设备</td>
</tr>
<tr>
<td>freezer</td>
<td>挂起或者恢复cgrops中进程</td>
</tr>
<tr>
<td>net_cls</td>
<td>可以标记cgroups中进程的网络数据包，然后可以使用tc(traffic control)对数据包进程控制</td>
</tr>
<tr>
<td>ns</td>
<td>可以使不同cgroups下面的进程使用不同的namespace</td>
</tr>
</tbody>
</table>
<h3 id="4-创建-cgroup">4. 创建 cgroup</h3>
<p>以下命令将创建一个名为 foo 的v1 cgroup（通过 pathname 格式可以看出来），并将其内存限制设为 50,000,000 字节 (50 MB)。</p>
<pre tabindex="0"><code>root # mkdir -p /sys/fs/cgroup/memory/foo
root # echo 50000000 &gt; /sys/fs/cgroup/memory/foo/memory.limit_in_bytes
</code></pre><p>现在，我可以为该 cgroup 分配一个进程，从而对其施加 cgroup 的内存限制。我编写了一个名为 test.sh 的 shell 脚本，它将 cgroup testing tool 打印到屏幕上，然后我只需静静等待。因为在我停止它之前，它会持续运行。</p>
<p>我在后台启动 test.sh，脚本生成其输出结果， PID 为 2428，然后我将其 PID 写入 cgroup 文件 /sys/fs/cgroup/memory/foo/cgroup.procs，从而将该进程分配给 cgroup。</p>
<pre tabindex="0"><code>root # ./test.sh &amp;
[1] 2428
root # cgroup testing tool
root # echo 2428 &gt; /sys/fs/cgroup/memory/foo/cgroup.procs
</code></pre><p>为了验证我的进程是否受限于我为 cgroup foo 定义的内存限制，我运行了以下 ps 命令。-o cgroup 标志显示了指定进程 (2428) 所属的 cgroup。输出结果确认其内存 cgroup 为 foo。</p>
<pre tabindex="0"><code>root # ps -o cgroup 2428
CGROUP
12:pids:/user.slice/user-0.slice/\
session-13.scope,10:devices:/user.slice,6:memory:/foo,...
</code></pre><p>默认情况下，当进程超过其 cgroup 定义的资源限制时，操作系统将终止该进程。</p>
<h1 id="结语">结语</h1>
<p>namespace 和 cgroup 是容器和现代应用的构建模块。当我们将应用重构为更现代的架构后，深入了解它们的工作方式非常重要。</p>
<p>Cgroup和namespace类似，也是将进程进程分组，但是目的与namespace不一样，namespace是为了隔离进程组之前的资源，而Cgroup是为了对一组进程进行统一的资源监控和限制。</p>
<p>namespace 支持系统资源隔离，而 cgroup 则支持对这些资源进行精细的控制和限制。</p>
<p>容器并非 namespace 和 cgroup 的唯一用例。namespace 和 cgroup 接口内置于 Linux 内核中，这意味着其他应用也可以使用它们来提供隔离和资源限制。</p>

    </div>

    
    



    
    


    <footer class="post-footer">
      <div class="post-tags">
          <a href="http://localhost:1313/tags/k8s/">K8S</a>
            
        </div>


      
      <nav class="post-nav">
        
          <a class="prev" href="/post/go/go-grpc/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">gRPC介绍</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/cloud-native/cn-svcmesh-introduce/">
            <span class="next-text nav-default">Service Mesh 介绍</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  


  
  

  

  
  

  
  

  

  

    

  

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:sky3hao@gmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="http://github.com/sky3hao" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="http://localhost:1313/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        老鹰之歌
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.fe83e11b4fbc9193d67e2c9db78bad21f8dc59fca0cacd8c1c3bb071bb16a852.js" integrity="sha256-/oPhG0&#43;8kZPWfiydt4utIfjcWfygys2MHDuwcbsWqFI=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  

















</body>
</html>
